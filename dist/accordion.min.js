"use strict";!function(e){function l(s,i){var o=this;if(Array.isArray(s))return!!s.length&&s.map(function(e){return new l(e,i)});var t={init:function(){var t=this;this.options=Object.assign({duration:600,aria:!0,collapse:!0,showMultiple:!1,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",targetClass:"ac-target",activeClass:"is-active",beforeOpen:function(){},onOpen:function(){},beforeClose:function(){},onClose:function(){}},i);var e=this.options.elementClass,n="string"==typeof s;this.container=n?document.querySelector(s):s,this.elements=Array.from(this.container.querySelectorAll(".".concat(e))),this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.currFocusedIdx=0,this.elements.map(function(e){e.classList.add("js-enabled"),t.hideElement(e),t.setTransition(e),t.generateIDs(e),t.setARIA(e),c++}),this.showElementsOnInit(),o.attachEvents()},showElementsOnInit:function(){var n=this,e=this.options.openOnInit;e.length&&e.map(function(e){if(e<n.elements.length){var t=n.elements[e];n.showElement(t,!1)}})},setTransition:function(e){var t=this.options,n=t.duration,s=t.panelClass,i=e.querySelector(".".concat(s)),o=a("transitionDuration");i.style[o]=n+"ms"},generateIDs:function(e){var t=this.options,n=t.triggerClass,s=t.panelClass,i=e.querySelector(".".concat(n)),o=e.querySelector(".".concat(s));e.setAttribute("id","ac-".concat(c)),i.setAttribute("id","ac-trigger-".concat(c)),o.setAttribute("id","ac-panel-".concat(c))},setARIA:function(e){var t=this.options,n=t.aria,s=t.triggerClass,i=t.panelClass;if(n){var o=e.querySelector(".".concat(s)),a=e.querySelector(".".concat(i));o.setAttribute("role","button"),o.setAttribute("aria-controls","ac-panel-".concat(c)),o.setAttribute("aria-disabled","false"),o.setAttribute("aria-expanded","false"),a.setAttribute("role","region"),a.setAttribute("aria-labelledby","ac-trigger-".concat(c))}},updateARIA:function(e,t){var n=this.options,s=n.aria,i=n.triggerClass;s&&e.querySelector(".".concat(i)).setAttribute("aria-expanded",t)},focus:function(e,t){e.preventDefault();var n=this.options.triggerClass;t.querySelector(".".concat(n)).focus()},focusFirstElement:function(e){this.focus(e,this.firstElement),this.currFocusedIdx=0},focusLastElement:function(e){this.focus(e,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement:function(e){var t=this.currFocusedIdx+1;if(t>this.elements.length-1)return this.focusFirstElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},focusPrevElement:function(e){var t=this.currFocusedIdx-1;if(t<0)return this.focusLastElement(e);this.focus(e,this.elements[t]),this.currFocusedIdx=t},showElement:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,s=this.options,i=s.panelClass,o=s.activeClass,a=s.beforeOpen,r=e.querySelector(".".concat(i)),l=r.scrollHeight;e.classList.add(o),n&&a(e),r.style.height=n?"".concat(l,"px"):"auto",this.updateARIA(e,!0)},hideElement:function(e){var t=this.options,n=t.panelClass,s=t.activeClass,i=t.beforeClose,o=e.querySelector(".".concat(n)),a=o.scrollHeight,r=e.classList.contains(s);e.classList.remove(s),r?(i(e),requestAnimationFrame(function(){o.style.height="".concat(a,"px"),requestAnimationFrame(function(){o.style.height=0})}),this.updateARIA(e,!1)):o.style.height=0},toggleElement:function(e){var t=this.options.activeClass;return e.classList.contains(t)?this.hideElement(e):this.showElement(e)},closeAllElements:function(){var n=this;this.options.showMultiple||this.elements.map(function(e,t){t!=n.currFocusedIdx&&n.hideElement(e)})},showAllElements:function(){var t=this,e=this.options,n=e.panelClass,s=e.activeClass;this.elements.map(function(e){e.classList.add(s),e.querySelector(".".concat(n)).style.height="auto",t.showElement(e,!1)})},handleClick:function(n){var s=this,i=n.currentTarget;this.elements.map(function(e,t){e.contains(i)&&"A"!==n.target.nodeName&&(s.currFocusedIdx=t,s.closeAllElements(),s.focus(n,e),s.toggleElement(e))})},handleKeydown:function(e){var t=38,n=40,s=36,i=35;switch(e.keyCode){case t:return this.focusPrevElement(e);case n:return this.focusNextElement(e);case s:return this.focusFirstElement(e);case i:return this.focusLastElement(e);default:return null}},handleTransitionEnd:function(e){if("height"===e.propertyName){var t=this.options,n=t.onOpen,s=t.onClose,i=e.currentTarget,o=parseInt(i.style.height),a=this.elements.find(function(e){return e.contains(i)});0<o?(i.style.height="auto",n(a)):s(a)}}},n=null;this.attachEvents=function(){if(!n){var s=t,e=s.options,i=e.triggerClass,o=e.panelClass;s.handleClick=s.handleClick.bind(s),s.handleKeydown=s.handleKeydown.bind(s),s.handleTransitionEnd=s.handleTransitionEnd.bind(s),s.elements.map(function(e){var t=e.querySelector(".".concat(i)),n=e.querySelector(".".concat(o));t.addEventListener("click",s.handleClick),t.addEventListener("keydown",s.handleKeydown),n.addEventListener("transitionend",s.handleTransitionEnd)}),null!==n&&s.showElementsOnInit(),n=!0}},this.detachEvents=function(){if(n){var s=t,e=s.options,i=e.triggerClass,o=e.panelClass;s.elements.map(function(e){var t=e.querySelector(".".concat(i)),n=e.querySelector(".".concat(o));t.removeEventListener("click",s.handleClick),t.removeEventListener("keydown",s.handleKeydown),n.removeEventListener("transitionend",s.handleTransitionEnd)}),s.showAllElements(),n=!1}};var a=function(e){return"string"==typeof document.documentElement.style[e]?e:(e=r(e),e="webkit".concat(e))},r=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.init()}var c=0;"undefined"!=typeof module&&void 0!==module.exports?module.exports=l:e.Accordion=l}(window);